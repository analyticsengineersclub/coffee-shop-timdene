version: 2

models:
  - name: order_item_sales
    description: Each row represents an order item
    columns:
      - name: order_item_id
        description: Foreign key to stg_order_items
        tests:
          - not_null
          - unique
  
  - name: pageviews
    description: Each row represents a pageview    
    columns:
      - name: pageview_id
        description: Primary key
        tests:
          - not_null
          - unique
      - name: customer_visitor_id
        description: Surrogate visitor id for the pageview including "logged out" sessions
        tests:
          - one_record_per:
              per: customer_id

  - name: weekly_revenue_by_customer
    description: Each row provides revenue per week per customer per device type
    columns:
      - name: weekly_revenue
        description: The weeks total revenue for the customer

      - name: device_type
        description: The device in which the orders were placed

      - name: cumulative_revenue
        description: The total revenue generated by the customer from the week of their first order and this week.